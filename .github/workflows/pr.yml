on: [ workflow_call ]

env:
  SPEC_DIR: ${{ github.workspace }}/specs_preprocessed
  PYTHON_DIR: ${{ github.workspace }}/sdks/python
  VERSION: 0.0.1

jobs:
  setup-environment:
    name: Setup Environment
    runs-on: ubuntu-latest
    env:
      ORIG_SPEC_DIR: ${{ github.workspace }}/res
      PREPROCESS: true

    steps:
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v6.1.0
        with:
          path: ${{ github.workspace }}/sdks/python/src
          token: ${{ secrets.GITHUB_TOKEN }}
          author: "Shmalikov <shmalikov@gmail.com>"
          branch: versions/${{ env.VERSION }}
          base: main
          title: "Autogenerated PR to add ${{ matrix.driver }} Python SDK"
          body: "This PR adds the ${{ matrix.driver }} Python SDK generated from OpenAPI specs."